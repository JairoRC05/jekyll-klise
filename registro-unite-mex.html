---
layout: null
permalink: /registro-unite-mex
---



<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>CRUD Equipos - Unite Mex</title>
  <style>
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #eee; }
    input, select, button { margin: 5px 0; padding: 5px; }
  </style>
</head>
<body>
  <h2>Registro de equipo</h2>
  <form id="teamForm">
    <label>Nombre del equipo:
      <input type="text" id="team" required>
    </label>
    <br>
    <label>Capitán:
      <input type="text" id="captain" required>
    </label>
    <br>
    <label>Fecha de inscripción:
      <input type="date" id="signupDate" required>
    </label>
    <br>
    <label>Fecha límite de pago:
      <input type="date" id="limitDate" disabled>
    </label>
    <br>
    <label>¿Pago realizado?
      <select id="paid" required>
        <option value="">Selecciona</option>
        <option value="Sí">Sí</option>
        <option value="No">No</option>
      </select>
    </label>
    <br>
    <button type="submit" id="submitBtn">Registrar equipo</button>
  </form>

  <h2>Equipos Registrados</h2>
  <table id="teamsTable">
    <thead>
      <tr>
        <th>Equipo</th>
        <th>Capitán</th>
        <th>Fecha de inscripción</th>
        <th>Fecha límite</th>
        <th>Pagado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody id="teamsTableBody"></tbody>
  </table>

  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBXznASeaw8vtU6OWwiP2kkVBh0L0b45y4",
      authDomain: "unite-mex.firebaseapp.com",
      databaseURL: "https://unite-mex-default-rtdb.firebaseio.com",
      projectId: "unite-mex",
      storageBucket: "unite-mex.appspot.com",
      messagingSenderId: "248961873504",
      appId: "1:248961873504:web:b9ad5434d6a1041bc73505",
      measurementId: "G-87W4VS8QYX"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const form = document.getElementById('teamForm');
    const signupDateInput = document.getElementById('signupDate');
    const limitDateInput = document.getElementById('limitDate');
    const teamsTableBody = document.getElementById('teamsTableBody');
    const submitBtn = document.getElementById('submitBtn');

    let editingKey = null;

    function addDays(date, days) {
      const result = new Date(date);
      result.setDate(result.getDate() + days);
      return result.toISOString().split('T')[0];
    }

    // Actualiza fecha límite automáticamente
    signupDateInput.addEventListener('change', () => {
      if (signupDateInput.value) {
        limitDateInput.value = addDays(new Date(signupDateInput.value), 7);
      } else {
        limitDateInput.value = '';
      }
    });

    // Guardar o actualizar equipo
    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const team = document.getElementById('team').value.trim();
      const captain = document.getElementById('captain').value.trim();
      const signupDate = signupDateInput.value;
      const limitDate = limitDateInput.value;
      const paid = document.getElementById('paid').value;

      if (!team || !captain || !signupDate || !limitDate || !paid) return;

      const data = { team, captain, signupDate, limitDate, paid };

      if (editingKey) {
        db.ref('equipos/' + editingKey).set(data).then(() => {
          alert('Equipo actualizado');
          form.reset();
          limitDateInput.value = '';
          submitBtn.textContent = 'Registrar equipo';
          editingKey = null;
        });
      } else {
        db.ref('equipos').push(data).then(() => {
          form.reset();
          limitDateInput.value = '';
        });
      }
    });

    // Mostrar equipos y botón Editar
    function loadTeams() {
      db.ref('equipos').orderByChild('signupDate').on('value', snapshot => {
        teamsTableBody.innerHTML = '';
        snapshot.forEach(childSnapshot => {
          const team = childSnapshot.val();
          const key = childSnapshot.key;

          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${team.team}</td>
            <td>${team.captain}</td>
            <td>${team.signupDate}</td>
            <td>${team.limitDate}</td>
            <td>${team.paid}</td>
            <td><button onclick="editTeam('${key}')">Editar</button></td>
          `;
          teamsTableBody.appendChild(row);
        });
      });
    }

    function editTeam(key) {
      db.ref('equipos/' + key).once('value').then(snapshot => {
        const data = snapshot.val();
        document.getElementById('team').value = data.team;
        document.getElementById('captain').value = data.captain;
        signupDateInput.value = data.signupDate;
        limitDateInput.value = data.limitDate;
        document.getElementById('paid').value = data.paid;
        editingKey = key;
        submitBtn.textContent = 'Actualizar equipo';
      });
    }

    loadTeams();
  </script>
</body>
</html>
