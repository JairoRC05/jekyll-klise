---
layout: login
title: Perfil del Jugador - Unite Mex
---

<style>
  .perfil-header {
    text-align: center;
    margin-bottom: 2rem;
  }
  .avatar-xl {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: 50%;
    margin-bottom: 1rem;
  }
  .plan-badge {
    font-size: 0.9em;
    padding: 4px 10px;
    border-radius: 20px;
  }
  .seccion {
    background: #fff;
    border-radius: 8px;
    padding: 1.25rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }
  .seccion h3 {
    margin-top: 0;
    border-bottom: 1px solid #eee;
    padding-bottom: 0.5rem;
    color: #333;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }
  .item {
    background: #f8f9fa;
    padding: 0.75rem;
    border-radius: 6px;
    text-align: center;
  }
  .logro-item, .trayectoria-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 0;
    border-bottom: 1px solid #f0f0f0;
  }
  .logro-item img, .trayectoria-item img {
    width: 40px;
    height: 40px;
    object-fit: cover;
    border-radius: 4px;
  }
</style>

<div class="container py-4">
  <div id="loading" class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando perfil...</span>
    </div>
  </div>

  <div id="perfil" style="display:none;">
    <!-- Header -->
    <div class="perfil-header">
      <img id="avatar" class="avatar-xl" src="/assets/avatars/female1.webp" alt="Avatar">
      <h1 id="nickname">Jugador</h1>
      <div>
        <span id="plan-badge" class="plan-badge bg-secondary">Free</span>
        <span class="text-muted ms-2" id="rol-equipo">â€”</span>
      </div>
    </div>

    <!-- Contacto (siempre visible) -->
    <div class="seccion">
      <h3>ğŸ’¬ Contacto</h3>
      <p><strong>ID de juego:</strong> <span id="id-juego">â€”</span></p>
      <p><strong>Discord:</strong> <span id="discord">â€”</span></p>
      <p id="descripcion" class="mt-2 text-muted">â€”</p>
    </div>

    <!-- EstadÃ­sticas -->
    <div class="seccion">
      <h3>ğŸ“Š EstadÃ­sticas</h3>
      <div class="grid">
        <div class="item">
          <div>Partidas</div>
          <strong id="partidas">â€”</strong>
        </div>
        <div class="item">
          <div>Main</div>
          <strong id="main">â€”</strong>
        </div>
        <div class="item">
          <div>Rol</div>
          <strong id="rol">â€”</strong>
        </div>
      </div>

      <div class="mt-3">
        <h4>Picks</h4>
        <div id="picks" class="grid"></div>
      </div>
    </div>

    <!-- Trayectoria -->
    <div id="seccion-trayectoria" class="seccion" style="display:none;">
      <h3>ğŸ… Trayectoria</h3>
      <div id="trayectoria-lista"></div>
    </div>

    <!-- Logros -->
    <div id="seccion-logros" class="seccion" style="display:none;">
      <h3>ğŸ† Logros</h3>
      <div id="logros-lista"></div>
    </div>

    <!-- Redes sociales (solo premium+) -->
    <div id="seccion-redes" class="seccion" style="display:none;">
      <h3>ğŸ“± Redes sociales</h3>
      <div id="redes-lista"></div>
    </div>

    <!-- Datos de streamer (solo streamer) -->
    <div id="seccion-streamer" class="seccion" style="display:none;">
      <h3>ğŸ¥ Streamer</h3>
      <div id="streamer-datos"></div>
    </div>
  </div>

  <div id="error" class="alert alert-danger" style="display:none;"></div>
</div>



<script>



  const db = firebase.firestore();


  const urlParams = new URLSearchParams(window.location.search);
  const uid = urlParams.get('uid');

  if (!uid || uid < 20) {
    document.getElementById('error').textContent = "Jugador no vÃ¡lido.";
    document.getElementById('error').style.display = 'block';
    document.getElementById('loading').style.display = 'none';
  } else {
    cargarPerfil(uid);
  }




  async function cargarPerfil(uid) {
    try {
      const doc = await db.collection('jugadores_publicos').doc(uid).get();
      if (!doc.exists) {
        throw new Error("Perfil no encontrado.");
      }

      const data = doc.data();
      document.getElementById('loading').style.display = 'none';
      document.getElementById('perfil').style.display = 'block';

      // Header
      document.getElementById('avatar').src = `/assets/avatars/${data.avatar || 'female1'}.webp`;
      document.getElementById('nickname').textContent = data.nickname || 'Jugador';
      document.getElementById('rol-equipo').textContent = `${data.rol || 'â€”'} â€¢ ${data.equipo || 'â€”'}`;

      // Plan badge
      const badge = document.getElementById('plan-badge');
      badge.textContent = data.plan || 'Free';
      badge.className = 'plan-badge';
      if (data.plan === 'premium') badge.classList.add('bg-warning', 'text-dark');
      else if (data.plan === 'streamer') badge.classList.add('bg-pink', 'text-white');
      else if (data.plan === 'coach') badge.classList.add('bg-success', 'text-white');
      else badge.classList.add('bg-secondary', 'text-white');

      // Contacto
      document.getElementById('id-juego').textContent = data.id_juego || 'â€”';
      document.getElementById('discord').textContent = data.discord || 'â€”';
      document.getElementById('descripcion').textContent = data.descripcion || 'Sin descripciÃ³n.';

      // EstadÃ­sticas
      document.getElementById('partidas').textContent = data.partidas ? `+${data.partidas}` : 'â€”';
      document.getElementById('main').textContent = data.mains || 'â€”';
      document.getElementById('rol').textContent = data.rol || 'â€”';

      // Picks
      const picksEl = document.getElementById('picks');
      picksEl.innerHTML = '';
      (data.picks || []).forEach(pick => {
        picksEl.innerHTML += `<div class="item">${pick}</div>`;
      });

      // Trayectoria
      renderTrayectoria(data.trayectoria || []);
      // Logros
      renderLogros(data.logros || []);

      // Redes sociales (solo si plan != free)
      if (data.plan && data.plan !== 'free') {
        renderRedes(data);
      }

      // Datos de streamer (solo si es streamer)
      if (data.plan === 'streamer') {
        renderStreamer(data);
      }

    } catch (err) {
      console.error(err);
      document.getElementById('loading').style.display = 'none';
      document.getElementById('error').textContent = "Jugador no encontrado.";
      document.getElementById('error').style.display = 'block';
    }
  }

  function renderTrayectoria(trayectoria) {
    const cont = document.getElementById('trayectoria-lista');
    const seccion = document.getElementById('seccion-trayectoria');
    if (!trayectoria.length) {
      seccion.style.display = 'none';
      return;
    }
    seccion.style.display = 'block';
    cont.innerHTML = '';
    trayectoria.forEach(t => {
      cont.innerHTML += `
        <div class="trayectoria-item">
          <img src="${t.equipoLogo || '/assets/placeholder-team.webp'}" alt="Equipo">
          <div>
            <div><strong>${t.equipoNombre || 'â€”'}</strong></div>
            <div>${t.rol || 'â€”'} â€¢ ${t.tiempo || 'â€”'}</div>
          </div>
        </div>
      `;
    });
  }

  function renderLogros(logros) {
    const cont = document.getElementById('logros-lista');
    const seccion = document.getElementById('seccion-logros');
    if (!logros.length) {
      seccion.style.display = 'none';
      return;
    }
    seccion.style.display = 'block';
    cont.innerHTML = '';
    logros.forEach(l => {
      cont.innerHTML += `
        <div class="logro-item">
          <img src="${l.equipoLogo || '/assets/placeholder-team.webp'}" alt="Equipo">
          <div>
            <div><strong>${l.posicion || 'â€”'}</strong></div>
            <div>${l.torneoNombre || 'â€”'} â€¢ ${l.fecha || 'â€”'}</div>
          </div>
          <img src="${l.torneoLogo || '/assets/placeholder-tournament.webp'}" alt="Torneo">
        </div>
      `;
    });
  }

  function renderRedes(data) {
    const redes = [];
    if (data.instagram) redes.push({ name: 'Instagram', value: data.instagram, icon: 'ğŸ“¸' });
    if (data.x) redes.push({ name: 'X', value: data.x, icon: 'ğŸ¦' });
    if (data.facebook) redes.push({ name: 'Facebook', value: data.facebook, icon: 'ğŸ“˜' });

    if (redes.length) {
      const cont = document.getElementById('redes-lista');
      const seccion = document.getElementById('seccion-redes');
      seccion.style.display = 'block';
      cont.innerHTML = redes.map(r => 
        `<p><strong>${r.icon} ${r.name}:</strong> ${r.value}</p>`
      ).join('');
    }
  }

  function renderStreamer(data) {
    const items = [];
    if (data.horario) items.push(`<strong>Horario:</strong> ${data.horario}`);
    if (data.seguidores) items.push(`<strong>Seguidores:</strong> ${data.seguidores}`);
    if (data.twitch) items.push(`<strong>Twitch:</strong> <a href="https://${data.twitch}" target="_blank">${data.twitch}</a>`);
    if (data.youtube) items.push(`<strong>YouTube:</strong> <a href="https://${data.youtube}" target="_blank">${data.youtube}</a>`);
    if (data.kick) items.push(`<strong>Kick:</strong> <a href="https://${data.kick}" target="_blank">${data.kick}</a>`);
    if (data.categorias) items.push(`<strong>CategorÃ­as:</strong> ${data.categorias}`);

    if (items.length) {
      const cont = document.getElementById('streamer-datos');
      const seccion = document.getElementById('seccion-streamer');
      seccion.style.display = 'block';
      cont.innerHTML = items.join('<br>');
    }
  }






</script>