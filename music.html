---
layout:
permalink: /nuestras-canciones
---

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NUESTRAS CANCIONES</title>
    <!-- Enlace a Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Estilos personalizados -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: rgb(0, 0, 0);
            /* overflow: hidden; */
            /* Prevent scrollbar if background image is larger than viewport */
        }

        /* New background div for blur effect */
        #blurredBackground {
            position: fixed;
            /* Fixed to cover the entire viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            transition: background-image 0.5s ease-in-out, filter 0.5s ease-in-out;
            filter: blur(40px);
            /* Initial blur, will be adjusted by JS */
            background-color: rgba(0, 0, 0, 0.7);
            z-index: -1;
            /* Place it behind all other content */
        }

        .music-player-container {
            /* background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);  */
            padding: 20px;
            width: 100%;
            max-width: 90%;
            text-align: center;
            /* border: 1px solid rgba(255, 255, 255, 0.1);  */
            z-index: 1;
            position: relative;
        }

        h1 {
            color: #ffffff !important;
            /* White text for title */
        }

        /* Tab Navigation Styles */
        .nav-tabs {
            border-bottom: none;
            /* Remove default border */
            margin-bottom: 30px !important;
            /* background-color: rgba(0, 0, 0, 0.5);  */
            overflow: hidden;
            /* Ensures rounded corners apply correctly */
        }

        .nav-tabs .nav-link {
            color: rgba(255, 255, 255, 0.7);
            /* Lighter text for inactive tabs */
            border: none;
            /* Remove individual tab borders */
            padding: 15px 25px;
            transition: all 0.3s ease;
        }

        .nav-tabs .nav-link:hover {
            color: #ffffff;
            background-color: rgba(255, 255, 255, 0.1);
            border-color: transparent;

        }

        .nav-tabs .nav-link.active {
            color: #ffffff;
            background-color: #00000080;
            /* Active tab background color */
            font-weight: bold;

            border-color: transparent;
        }

        .nav-item:first-child .nav-link {
            border-top-left-radius: 10px;
            border-bottom-left-radius: 10px;
        }

        .nav-item:last-child .nav-link {
            border-top-right-radius: 10px;
            border-bottom-right-radius: 10px;
        }


        /* Player Controls */
        .player-controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 15px;
            background-color: rgba(255, 255, 255, 0);
            /* Slightly visible background for controls */
            padding: 15px 20px;
            border-radius: 10px;
        }

        .player-controls button {
            background-color: rgba(255, 255, 255, 0.1);
            /* Subtle button background */
            color: #ffffff;
            /* White icon color */
            border: none;
            border-radius: 50px;
            /* More rounded buttons */
            width: 50px;
            /* Fixed width for consistent circle/oval shape */
            height: 50px;
            /* Fixed height */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5em;
            /* Larger icons */
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .player-controls button:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
            /* Slight scale on hover */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }

        .player-controls button.btn-primary {
            /* Play/Pause button style */
           background-color: rgba(255, 255, 255, 0.1);
            /* Stronger blue for primary action */
            color: white;
            width: 60px;
            /* Larger play button */
            height: 60px;
            font-size: 2em;
        }

        .player-controls button.btn-warning {
            /* Pause button style when active */
             background-color: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            /* Darker text for warning background */
        }

        .player-controls button.btn-info {
            /* Shuffle/Repeat buttons */
            background-color: rgba(255, 255, 255, 0.1);
            /* Lighter info background */
            color: #ffffff;
        }

        .player-controls button.btn-success {
            /* Active shuffle/repeat */
            background-color: #28a745;
            color: white;
        }

        .mute-button {
            background-color: rgba(255, 255, 255, 0);
            /* Subtle button background */
            color: #ffffff;
            /* White icon color */
            border: none;
            border-radius: 50px;
            /* More rounded buttons */
            width: 10px;
            /* Fixed width for consistent circle/oval shape */
            height: 10px;
            /* Fixed height */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1em;
            /* Larger icons */
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .mute-button.muted {
            background-color: #dc354600;
            color: rgba(255, 255, 255, 0.329);
        }

        /* Now Playing Section */
        .now-playing-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px;
            background-color: transparent;
            /* No specific background, use container's */
            border-radius: 10px;
            box-shadow: none;
            /* No extra shadow */
            max-width: 400px;
            /* Adjust max width for cover and text */
            margin-left: auto;
            margin-right: auto;
        }

        .now-playing-cover {
            width: 450px;
            /* Larger cover image */
            height: 450px;
            object-fit: cover;
            border-radius: 10px;
            /* Slightly less rounded */
            margin-bottom: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            /* Stronger shadow for cover */
        }

        .now-playing-title {
            font-size: 2.2em;
            /* Larger title */
            font-weight: 800;
            /* Bolder */
            color: #ffffff;
            /* White text */
            margin-bottom: 5px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            /* Text shadow for readability */
        }

        .now-playing-artist {
            font-size: 1.2em;
            /* Larger artist name */
            color: rgba(255, 255, 255, 0.8);
            /* Slightly faded white */
            margin-bottom: 15px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }

        /* Progress and Volume Bars */
        .progress-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            width: 100%;
            /* Add padding to match visual of image */
        }

        .progress-bar-input {
            height: 2px;
            width: 100%;
            /* Thinner progress bar */
            background: rgba(255, 255, 255, 0.3);
            /* Lighter background */
        }

        .progress-bar-input::-webkit-slider-thumb {
            background: #ffffff;
        }

        .progress-bar-input::-moz-range-thumb {
            background: #ffffff;
        }

        .time-display {
            color: rgba(255, 255, 255, 0.8);
            /* White time display */
        }

        .volume-container {
            width: 100%;
            /* Add some margin from the edge */
            display: flex;
            /* Ensure inline elements are aligned */
            align-items: center;
            gap: 5px;
        }
        

        .volume-slider {
            width: 100%;
            /* Wider volume slider */
            height: 2px;
            /* Thinner */
            background: rgba(255, 255, 255, 0);
        }

        .volume-slider::-webkit-slider-thumb {
            background: #fcfcfc;
        }

        .volume-slider::-moz-range-thumb {
            background: #ffffff;
        }


        .album-card {
          background-color: #44444466;
            /* Keep lighter for this tab */
            border-color: #44444466;
        }

        .album-card .card-title {
            color: #9d9d9d;
        }

        .album-card .card-text {
            color: #6c757d;
        }

        /* Ensure active state works well on both tabs */
        .album-card.active {
            background-color: #20202066;
            color: white;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
            border-color: #20202066;
        }

        .album-card.active .card-title,
        .album-card.active .card-text {
            color: white;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .music-player-container {
                padding: 0px;
            }

            .now-playing-cover {
                width: 100%;
                height: 100%;
            }

            .now-playing-title {
                font-size: 1.8em;
            }

            .now-playing-artist {
                font-size: 1em;
            }

            .player-controls {
                gap: 5px;
                padding: 10px;
            }

            .player-controls button {
                width: 45px;
                height: 45px;
                font-size: 1.3em;
            }

            .player-controls button.btn-primary {
                width: 55px;
                height: 55px;
                font-size: 1.8em;
            }

            .volume-container {
                margin-left: 0;
                /* Reset margin for smaller screens */
                width: 100%;
                /* Take full width */
                justify-content: center;
                margin-top: 10px;
            }

            .volume-slider {
                width: calc(100% - 60px);
                /* Adjust width relative to mute button */
            }
        }


          input[type="range"] {
            -webkit-appearance: none; /* Removes default WebKit styling */
            width: 100%; /* Adjust as needed */
            height: 8px; /* Height of the track */
            background: #d3d3d3; /* Default color of the track (unfilled portion) */
            outline: none; /* Remove focus outline */
            opacity: 0.7; /* Opacity of the track */
            -webkit-transition: .2s; /* Transition for hover/active states */
            transition: opacity .2s;
            border-radius: 5px; /* Rounded corners for the track */
            /* Ensure the track is always visible even if the thumb covers it */
            z-index: 1;
            position: relative;
        }

        /* Color when hovering over the track */
        input[type="range"]:hover {
            opacity: 1;
        }

        /* Styling the thumb (the indicator/slider) */
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; /* Removes default WebKit styling */
            width: 20px; /* Width of the thumb */
            height: 20px; /* Height of the thumb */
            border-radius: 50%; /* Makes it a circle */
            background: #ffffff; /* Color of the thumb - Changed to blue for example */
            cursor: pointer; /* Pointer cursor on hover */
            margin-top: -6px; /* Adjust to center the thumb vertically with the track */
            box-shadow: 0px 0px 2px rgba(0,0,0,0.5); /* Optional shadow for the thumb */
            z-index: 2; /* Ensure thumb is above the track */
            position: relative;
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ffffff; /* Color of the thumb - Changed to blue for example */
            cursor: pointer;
            box-shadow: 0px 0px 2px rgba(0,0,0,0.5);
        }

        input[type="range"]::-ms-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ffffff; /* Color of the thumb - Changed to blue for example */
            cursor: pointer;
            box-shadow: 0px 0px 2px rgba(0,0,0,0.5);
        }

        /* Styling the filled portion of the track (for WebKit browsers like Chrome, Safari, Edge) */
        input[type="range"]::-webkit-slider-runnable-track {
            width: 100%;
            height: 8px;
            cursor: pointer;
            /* Dynamic color based on value, first color is filled, second is unfilled */
            background: linear-gradient(to right, #2196F3 var(--value, 0%), #d3d3d3 var(--value, 0%));
            border-radius: 5px;
            /* Note: box-shadow on the track is not common as it can interfere with thumb */
        }

        /* For Firefox, the track styling is often done on the ::-moz-range-track pseudo-element */
        input[type="range"]::-moz-range-track {
            width: 100%;
            height: 8px;
            cursor: pointer;
            /* For Firefox, you might need JavaScript or a polyfill to dynamically color the filled part
               with a gradient similar to WebKit. Here, it's just the background of the full track. */
            background: #d3d3d3; /* Background of the full track */
            border-radius: 5px;
        }

        /* For IE/Edge (older versions), the track styling */
        input[type="range"]::-ms-track {
            width: 100%;
            height: 8px;
            background: transparent; /* Needed to make track transparent for custom filling */
            border-color: transparent;
            color: transparent; /* Hide the default track color */
        }
        input[type="range"]::-ms-fill-lower {
            background: #ffffff; /* Filled part for IE/Edge */
            border-radius: 5px;
        }
        input[type="range"]::-ms-fill-upper {
            background: #d3d3d3; /* Unfilled part for IE/Edge */
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <!-- New background div for blur effect -->
    <div id="blurredBackground"></div>

    <div class="music-player-container">
        <!-- Pestañas de Navegación -->
        <ul class="nav nav-tabs justify-content-center mt-4 " id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="player-tab" data-bs-toggle="tab" data-bs-target="#player"
                    type="button" role="tab" aria-controls="player" aria-selected="true">Ahora suena</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="playlist-tab" data-bs-toggle="tab" data-bs-target="#playlist" type="button"
                    role="tab" aria-controls="playlist" aria-selected="false">Mis canciones</button>
            </li>
        </ul>

        <!-- Contenido de las Pestañas -->
        <div class="tab-content" id="myTabContent">
            <!-- Pestaña Mi Reproductor -->
            <div class="tab-pane fade show active" id="player" role="tabpanel" aria-labelledby="player-tab">
                <!-- Sección de "Reproduciendo Ahora" -->
                <div id="nowPlayingSection" class="now-playing-section">
                    <img id="nowPlayingCover" class="now-playing-cover"
                        src="https://placehold.co/180x180/E0E0E0/555555?text=Selecciona+una+canción"
                        alt="Portada de la canción actual">

                    <div class="progress-container">
                        <span id="currentTime" class="time-display">0:00</span>
                        <input type="range" id="progressBar" class="progress-bar-input" value="0" min="0" max="100">
                        <span id="durationTime" class="time-display">0:00</span>
                    </div>
                    <div id="nowPlayingTitle" class="now-playing-title">No hay canción seleccionada</div>
                    <div id="nowPlayingArtist" class="now-playing-artist"></div>

                    <div class="player-controls">
                        <button id="shuffleButton" class="btn btn-info" title="Aleatorio"><i
                                class="fas fa-random"></i></button>
                        <button id="prevButton" class="btn btn-secondary" title="Anterior"><i
                                class="fas fa-backward"></i></button>
                        <button id="playPauseButton" class="btn btn-primary" title="Reproducir"><i
                                class="fas fa-play"></i></button>
                        <button id="nextButton" class="btn btn-secondary" title="Siguiente"><i
                                class="fas fa-forward"></i></button>
                        <button id="repeatButton" class="btn btn-info" title="Repetir"><i
                                class="fas fa-redo-alt"></i></button>
                    </div>
                    
                    <div class="volume-container">
                        <button id="muteButton" class="mute-button" title="Silenciar">
                            <i class="fa-solid fa-volume-low"></i>
                            </button>
                        <input type="range" id="volumeSlider" class="volume-slider" min="0" max="1" step="0.01"
                            value="1" title="Volumen">
                    </div>
                </div>



                <!-- Elemento de audio -->
                <audio id="audioPlayer" class="audio-player"></audio>

                <!-- Barra de progreso -->


                <!-- Controles de reproducción -->

            </div>

            <!-- Pestaña Mis Canciones -->
            <div class="tab-pane fade" id="playlist" role="tabpanel" aria-labelledby="playlist-tab">
                <!-- Adjusted text color for this tab -->
                <div id="playlistGrid"
                    class="row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-6 g-3 playlist-row">
                </div>
            </div>
        </div>
    </div>

    <!-- Enlace a Bootstrap JS (Popper y JS bundle) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <!-- Font Awesome para iconos -->
    <script src="https://kit.fontawesome.com/5bc1459e63.js" crossorigin="anonymous"></script>

    <script>
        // Global variables for the player
        const audioPlayer = document.getElementById('audioPlayer');
        const playPauseButton = document.getElementById('playPauseButton');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const playlistGrid = document.getElementById('playlistGrid');

        // Elements for "Now Playing" section
        const nowPlayingCover = document.getElementById('nowPlayingCover');
        const nowPlayingTitle = document.getElementById('nowPlayingTitle');
        const nowPlayingArtist = document.getElementById('nowPlayingArtist');

        // New elements for progress bar and time display
        const progressBar = document.getElementById('progressBar');
        const currentTimeSpan = document.getElementById('currentTime');
        const durationTimeSpan = document.getElementById('durationTime');

        // New elements for volume control
        const volumeSlider = document.getElementById('volumeSlider');
        const muteButton = document.getElementById('muteButton');

        // New elements for playback modes
        const shuffleButton = document.getElementById('shuffleButton');
        const repeatButton = document.getElementById('repeatButton');

        // New element for the blurred background
        const blurredBackground = document.getElementById('blurredBackground');


        let playlist = JSON.parse(localStorage.getItem('musicPlaylist')) || [
            {
                name: "LIMONAR",
                artist: "GREEICY",
                audioSrc: "/assets/music/limonar.mp3", 
                imageSrc: "/assets/music/covers/limonar.jpg" 
            },
            {
                name: "ESTAS GANAS",
                artist: "GREEICY",
                audioSrc: "/assets/music/estasganas.mp3", 
                imageSrc: "/assets/music/covers/estasganas.jpg" 
            },
            {
                name: "ADORO",
                artist: "BRONCO / JULIETA VENEGAS",
                audioSrc: "/assets/music/adoro.mp3", 
                imageSrc: "/assets/music/covers/adoro.jpg" 
            },
            {
                name: "KILÓMETROS",
                artist: "JISA",
                audioSrc: "/assets/music/kilometros.mp3", 
                imageSrc: "/assets/music/covers/kilometros.jpg"
            },
            {
                name: "LO MEJOR DE MI VIDA ERES TÚ",
                artist: "RICKY MARTIN",
                audioSrc: "/assets/music/lomejordemividaerestu.mp3", 
                imageSrc: "/assets/music/covers/lomejordemividaerestu.jpg"
            },
            {
                name: "ENVEJECER CONMIGO",
                artist: "RANDY",
                audioSrc: "/assets/music/envejecerconmigo.mp3", 
                imageSrc: "/assets/music/covers/envejecerconmigo.jpg"
            },
            {
                name: "MILLONES",
                artist: "CAMILO",
                audioSrc: "/assets/music/millones.mp3", 
                imageSrc: "/assets/music/covers/mismanos.jpg"
            },
            {
                name: "ANDALUCÍA",
                artist: "LUIS FONSI",
                audioSrc: "/assets/music/andalucía.mp3", 
                imageSrc: "/assets/music/covers/elviaje.jpg"
            }
            // {
            //     name: "MI DÍA FAVORITO",
            //     artist: "HA-ASH",
            //     audioSrc: "/assets/music/andalucía.mp3", 
            //     imageSrc: "/assets/music/covers/elviaje.jpg"
            // },
            //      {
            //     name: "FAVORITO",
            //     artist: "CAMILO",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            //      {
            //     name: "QUIERO DECIRTE",
            //     artist: "SEBASTIAN YATRA",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            //      {
            //     name: "MAGÍA",
            //     artist: "ANDRÉS CEPEDA / SEBASTIAN YATRA",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "¿QUÉ HACES?",
            //     artist: "BECKY G / MANUEL TURIZO",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "¿SABES?",
            //     artist: "ALEX UBAGO",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "LA BUENA",
            //     artist: "NACHO",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "NO ENCONTRARÉ",
            //     artist: "MJ",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "MI REINA",
            //     artist: "YOTUEL",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "SI ME LO PIDES",
            //     artist: "SAMDE",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "OTRA COMO TÚ",
            //     artist: "EROS RAMAZOTTI",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "AVECES A BESOS",
            //     artist: "GREICY",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "PRITI",
            //     artist: "DANNY OCEAN / SECH",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "LA MUJER QUE NO SOÑE",
            //     artist: "RICARDO ARJONA",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "LOS BESOS",
            //     artist: "GREEICY",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "MI EX TENÍA RAZÓN",
            //     artist: "KAROL G",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "JAQUEMATE",
            //     artist: "MAJO",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "UNA VIDA PASADA",
            //     artist: "CAMILO / CARÍN LEÓN",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "MAR Y BOSQUE",
            //     artist: "ANDRÉS OBREGÓN",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "SIMPLES CORAZONES",
            //     artist: "FONSECA",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "LOCO",
            //     artist: "RICARDO PÉLAEZ",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "Y SI ME ENAMORÓ",
            //     artist: "DANIEL ELBITTAR / CARLOS BAUTE",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "YO NO SE MAÑANA",
            //     artist: "LUIS ENRIQUE",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "HASTA ESE DÍA",
            //     artist: "LUIS ENRIQUE",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // },
            // {
            //     name: "CRISTINA",
            //     artist: "SEBASTIAN YATRA",
            //     audioSrc: "/assets/music/lomejordemivida.mp3", 
            //     imageSrc: "/assets/music/covers/mas.jpg"
            // }
        ];

        let currentSongIndex = parseInt(localStorage.getItem('currentSongIndex')) || -1; // Current song index
        let isShuffled = localStorage.getItem('isShuffled') === 'true' || false; // Shuffle mode state
        let isRepeating = localStorage.getItem('isRepeating') === 'true' || false; // Repeat mode state

        // Function to format time (e.g., 185 seconds to 3:05)
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
        }

        // Function to save playlist and state to localStorage
        function savePlayerState() {
            localStorage.setItem('musicPlaylist', JSON.stringify(playlist));
            localStorage.setItem('currentSongIndex', currentSongIndex);
            localStorage.setItem('isShuffled', isShuffled);
            localStorage.setItem('isRepeating', isRepeating);
        }

        // Function to render the playlist in the DOM as a grid of cards
        function renderPlaylistGrid() {
            playlistGrid.innerHTML = ''; // Clear existing grid
            if (playlist.length === 0) {
                playlistGrid.innerHTML = `
                    <div class="col text-center text-muted">
                        <small>No hay canciones en la lista. Agrega algunas en el código fuente o en tus carpetas locales.</small>
                    </div>
                `;
                return;
            }

            // Add each song to the grid as a Bootstrap card
            playlist.forEach((song, index) => {
                const colDiv = document.createElement('div');
                colDiv.classList.add('col'); // Column for Bootstrap grid system

                const songCard = document.createElement('div');
                songCard.classList.add('card', 'album-card');
                if (index === currentSongIndex) {
                    songCard.classList.add('active'); // Mark the active song
                }
                songCard.dataset.index = index; // To identify the song when clicked

                // Check if imageSrc is a local path or a placeholder
                let imgSrc = song.imageSrc;
                if (!imgSrc || imgSrc.startsWith("https://placehold.co/")) { // If placeholder, use a generic one or default
                    // You might want to use a more specific local default image if available
                    imgSrc = "./images/default_album.jpg"; // Fallback to a default local image
                    // Or keep the placeholder for visual clarity if no specific local image
                    // imgSrc = "https://placehold.co/180x180/E0E0E0/555555?text=Sin+Portada";
                }

                songCard.innerHTML = `
                    <img src="${imgSrc}" class="card-img-top" alt="Portada de Álbum">
                    <div class="card-body">
                        <h5 class="card-title">${song.name}</h5>
                        <p class="card-text">${song.artist}</p>
                    </div>
                `;

                // Event listener to play the song when clicking on the card
                songCard.addEventListener('click', (event) => {
                    // If the delete button is clicked, handle it
                    if (event.target.tagName === 'BUTTON' && event.target.classList.contains('remove-song-btn')) {
                        removeSong(parseInt(event.target.dataset.index));
                    } else {
                        // If the card element is clicked (not the button), play the song
                        loadSong(parseInt(songCard.dataset.index));
                        playSong();
                    }
                });

                colDiv.appendChild(songCard);
                playlistGrid.appendChild(colDiv);
            });
            savePlayerState(); // Save state after rendering
        }

        // Function to load a song into the player and update the "Now Playing" section and body background
        function loadSong(index) {
            if (index >= 0 && index < playlist.length) {
                currentSongIndex = index;
                const song = playlist[currentSongIndex];
                audioPlayer.src = song.audioSrc; // Use audio URL from JSON

                // Update "Now Playing" section
                nowPlayingCover.src = song.imageSrc;
                nowPlayingCover.alt = `Portada de ${song.name}`;
                nowPlayingTitle.textContent = song.name;
                nowPlayingArtist.textContent = song.artist;

                // Update blurred background div with blur effect
                blurredBackground.style.backgroundImage = `url(${song.imageSrc})`;
                // blurredBackground.style.filter = 'blur(50px)';

                updatePlayPauseButton(false); // Set button to "Play" visually
                renderPlaylistGrid(); // Update active state in the grid
                savePlayerState(); // Save state after loading song
            } else {
                // Reset "Now Playing" section if no song is selected
                nowPlayingCover.src = "https://placehold.co/180x180/E0E0E0/555555?text=Selecciona+una+canción";
                nowPlayingCover.alt = "Selecciona una canción";
                nowPlayingTitle.textContent = "No hay canción seleccionada";
                nowPlayingArtist.textContent = "";

                // Reset blurred background div
                blurredBackground.style.backgroundImage = 'none';
                blurredBackground.style.filter = 'blur(0px)'; // Remove blur

                audioPlayer.src = ''; // Clear the player
                currentSongIndex = -1;
                updatePlayPauseButton(false); // Button to "Play"
                renderPlaylistGrid(); // Update the grid
                savePlayerState(); // Save state after resetting
            }
        }

        // Function to play the song
        function playSong() {
            if (audioPlayer.src) {
                audioPlayer.play();
                updatePlayPauseButton(true); // Change button to "Pause"
            }
        }

        // Function to pause the song
        function pauseSong() {
            audioPlayer.pause();
            updatePlayPauseButton(false); // Change button to "Play"
        }

        // Function to toggle between play and pause
        playPauseButton.addEventListener('click', () => {
            if (playlist.length === 0) {
                nowPlayingTitle.textContent = "No hay canciones en la lista. Agrega algunas en el código.";
                nowPlayingArtist.textContent = "";
                return;
            }

            if (audioPlayer.paused) {
                if (!audioPlayer.src && currentSongIndex === -1) {
                    currentSongIndex = 0;
                    loadSong(currentSongIndex);
                }
                playSong();
            } else {
                pauseSong();
            }
        });

        // Function for the next song
        nextButton.addEventListener('click', () => {
            if (playlist.length > 0) {
                if (isShuffled) {
                    let newIndex;
                    do {
                        newIndex = Math.floor(Math.random() * playlist.length);
                    } while (newIndex === currentSongIndex && playlist.length > 1); // Avoid repeating the same song if playlist has more than 1 song
                    currentSongIndex = newIndex;
                } else {
                    currentSongIndex = (currentSongIndex + 1) % playlist.length; // Cycle to the next song
                }
                loadSong(currentSongIndex);
                playSong();
            }
        });

        // Function for the previous song
        prevButton.addEventListener('click', () => {
            if (playlist.length > 0) {
                if (isShuffled) {
                    let newIndex;
                    do {
                        newIndex = Math.floor(Math.random() * playlist.length);
                    } while (newIndex === currentSongIndex && playlist.length > 1);
                    currentSongIndex = newIndex;
                } else {
                    currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length; // Cycle to the previous song
                }
                loadSong(currentSongIndex);
                playSong();
            }
        });

        // When the current song ends, play the next one
        audioPlayer.addEventListener('ended', () => {
            if (playlist.length > 0) {
                if (isRepeating) {
                    // If repeating, just replay the current song
                    playSong();
                } else {
                    // If not repeating, move to the next song
                    if (isShuffled) {
                        let newIndex;
                        do {
                            newIndex = Math.floor(Math.random() * playlist.length);
                        } while (newIndex === currentSongIndex && playlist.length > 1);
                        currentSongIndex = newIndex;
                    } else {
                        currentSongIndex = (currentSongIndex + 1) % playlist.length;
                    }
                    loadSong(currentSongIndex);
                    playSong();
                }
            }
        });

        // Function to update the text and icon of the play/pause button
        function updatePlayPauseButton(isPlaying) {
            if (isPlaying) {
                playPauseButton.innerHTML = '<i class="fas fa-pause"></i>';
                playPauseButton.classList.remove('btn-primary');
                playPauseButton.classList.add('btn-warning');
            } else {
                playPauseButton.innerHTML = '<i class="fas fa-play"></i>';
                playPauseButton.classList.remove('btn-warning');
                playPauseButton.classList.add('btn-primary');
            }
        }

        // Function to remove a song from the playlist
        function removeSong(indexToRemove) {
            // Stop playback if the song being removed is the current one
            if (indexToRemove === currentSongIndex) {
                pauseSong();
                audioPlayer.src = '';
                // Reset "Now Playing" section
                nowPlayingCover.src = "https://placehold.co/180x180/E0E0E0/555555?text=Selecciona+una+canción";
                nowPlayingCover.alt = "Selecciona una canción";
                nowPlayingTitle.textContent = "No hay canción seleccionada";
                nowPlayingArtist.textContent = "";
                currentSongIndex = -1; // Reset index

                // Reset blurred background div
                blurredBackground.style.backgroundImage = 'none';
                blurredBackground.style.filter = 'blur(0px)';
            }

            // Remove the song from the playlist
            playlist.splice(indexToRemove, 1);

            // Adjust the current song index if necessary
            if (currentSongIndex > indexToRemove) {
                currentSongIndex--;
            } else if (currentSongIndex === playlist.length && playlist.length > 0) {
                // If the last song was removed and the playlist is not empty
                currentSongIndex = playlist.length - 1;
                loadSong(currentSongIndex);
            } else if (playlist.length === 0) {
                // If the playlist is empty after removal
                currentSongIndex = -1;
            }

            renderPlaylistGrid(); // Re-render the playlist grid
            // If there is a song currently loaded and it's not the one that was removed, reload it to update metadata.
            if (currentSongIndex !== -1 && audioPlayer.src) {
                // No need to reload the song if it's already correctly loaded.
                // Just render to update the highlight.
            }
            savePlayerState(); // Save state after removing a song
        }

        // Progress bar logic
        audioPlayer.addEventListener('timeupdate', () => {
            const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
            progressBar.value = progress;
            currentTimeSpan.textContent = formatTime(audioPlayer.currentTime);
        });

        audioPlayer.addEventListener('loadedmetadata', () => {
            durationTimeSpan.textContent = formatTime(audioPlayer.duration);
            progressBar.max = 100; // Reset max to 100 for percentage
        });

        progressBar.addEventListener('input', () => {
            const seekTime = (progressBar.value / 100) * audioPlayer.duration;
            audioPlayer.currentTime = seekTime;
        });

        // Volume control logic
        volumeSlider.addEventListener('input', () => {
            audioPlayer.volume = volumeSlider.value;
            // Update mute button icon based on volume
            if (audioPlayer.volume === 0) {
                muteButton.innerHTML = '<i class="fas fa-volume-mute"></i>';
                muteButton.classList.add('muted');
            } else {
                muteButton.innerHTML = '<i class="fas fa-volume-low"></i>';
                muteButton.classList.remove('muted');
            }
        });

        // Mute button logic
        muteButton.addEventListener('click', () => {
            audioPlayer.muted = !audioPlayer.muted;
            if (audioPlayer.muted) {
                muteButton.innerHTML = '<i class="fas fa-volume-mute"></i>';
                muteButton.classList.add('muted');
                volumeSlider.value = 0; // Set slider to 0 visually
            } else {
                muteButton.innerHTML = '<i class="fas fa-volume-low"></i>';
                muteButton.classList.remove('muted');
                // Restore previous volume if it was muted
                if (volumeSlider.value == 0) {
                    volumeSlider.value = 1; // Default to full volume if it was 0 before muting
                }
                audioPlayer.volume = volumeSlider.value;
            }
        });

        // Repeat button logic
        repeatButton.addEventListener('click', () => {
            isRepeating = !isRepeating;
            if (isRepeating) {
                repeatButton.classList.add('btn-success');
                repeatButton.classList.remove('btn-info');
                // Optionally, make the audio loop HTML attribute true if only repeating current song
                // audioPlayer.loop = true;
            } else {
                repeatButton.classList.remove('btn-success');
                repeatButton.classList.add('btn-info');
                // audioPlayer.loop = false;
            }
            savePlayerState(); // Save state
        });

        // Shuffle button logic
        shuffleButton.addEventListener('click', () => {
            isShuffled = !isShuffled;
            if (isShuffled) {
                shuffleButton.classList.add('btn-success');
                shuffleButton.classList.remove('btn-info');
            } else {
                shuffleButton.classList.remove('btn-success');
                shuffleButton.classList.add('btn-info');
            }
            savePlayerState(); // Save state
        });

        // Initial setup on load
        renderPlaylistGrid();

        // Load the song saved in localStorage, or the first one if none
        const savedIndex = parseInt(localStorage.getItem('currentSongIndex'));
        if (playlist.length > 0 && savedIndex !== -1 && savedIndex < playlist.length) {
            loadSong(savedIndex);
        } else if (playlist.length > 0) {
            loadSong(0); // Load the first song if no saved index or invalid
        } else {
            // If playlist is empty, ensure "Now Playing" section is reset
            nowPlayingCover.src = "https://placehold.co/180x180/E0E0E0/555555?text=Selecciona+una+canción";
            nowPlayingCover.alt = "Selecciona una canción";
            nowPlayingTitle.textContent = "No hay canción seleccionada";
            nowPlayingArtist.textContent = "";
        }

        // Apply saved shuffle/repeat state
        if (isShuffled) {
            shuffleButton.classList.add('btn-success');
            shuffleButton.classList.remove('btn-info');
        }
        if (isRepeating) {
            repeatButton.classList.add('btn-success');
            repeatButton.classList.remove('btn-info');
        }

        // Set initial volume from slider or default
        audioPlayer.volume = volumeSlider.value;
    </script>
</body>

</html>