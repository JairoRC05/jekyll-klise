---
layout: login
title: Registro
permalink: /registro

---


{% include login-css.html %}


<div class="login-container">
  <div class="login-panel">
    <div class="login-left">
      <div class="overlay">
        <h2>¡BIENVENIDO A</h2>
        <h1><span>NACIÓN</span> UNITE!</h1>
        <p>Tu aventura Pokémon Unite comienza aquí.</p>
      </div>
    </div>
    <div class="login-right">
      <h2>Regístrate</h2>
      <form id="registroForm">
        <input type="email" id="email" placeholder="Correo electrónico" required>
        <input type="password" id="password" placeholder="Contraseña (mín. 6 caracteres)" required>
        <input type="text" id="nickname" placeholder="Nickname" required>
        <input type="text" id="idJuego" placeholder="ID de Juego" required>



        <button type="submit" class="btn-unite">
          <img src="/assets/mis/pokeball-1.webp" alt="icono">
          Crear cuenta
        </button>
      </form>
      <p id="mensaje" style="color: red;"></p>
      <p class="new">¿Ya tienes cuenta?


        <a href="/iniciar-sesion"> Iniciar sesión</a>
      </p>

      <div class="social-login">
        <p>Síguenos</p>
        <div class="icons">
          <i class="bi bi-instagram"></i>
          <i class="bi bi-facebook"></i>
          <i class="bi bi-twitter-x"></i>
        </div>
      </div>
    </div>
  </div>
</div>





<script type="module">
  document.getElementById('registroForm').addEventListener('submit', function (e) {
    e.preventDefault();

    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const nickname = document.getElementById('nickname').value;
    const idJuego = document.getElementById('idJuego').value;

    firebase.auth().createUserWithEmailAndPassword(email, password)
      .then((userCredential) => {
        const user = userCredential.user;

        const datosPrivado = {
          email: email,
          nickname: nickname,
          id_juego: idJuego,
          plan: "free",
          monedas: 0,
          logros: [],
          trayectoria: [],
          equipo: "Disponible",
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        };

        const datosPublico = {
          nickname: nickname,
          avatar: "female1",
          rol: "",
          equipo: "Disponible",
          plan: "free"
        };

        // Guardar documento privado
        return firebase.firestore().collection('usuarios').doc(user.uid).set(datosPrivado)
          .then(() => {
            // Luego guardar documento público
            return firebase.firestore().collection('jugadores_publicos').doc(user.uid).set(datosPublico);
          });
      })
      .then(() => {
        // Éxito total
        document.getElementById('mensaje').style.color = 'green';
        document.getElementById('mensaje').textContent = '¡Registro exitoso! Redirigiendo...';
        setTimeout(() => {
          window.location.href = '/mi-perfil';
        }, 2000);
      })
      .catch((error) => {
        document.getElementById('mensaje').textContent = error.message;
      });

  });
</script>